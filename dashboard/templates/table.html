{% extends "base.html" %}
{% block content %}
<h1 class="mb-4">{{ title }}</h1>
<div id="grid"></div>
{% endblock %}

{% block scripts %}
<script>
  new gridjs.Grid({
    columns: {{ columns|tojson }},
    search: true,
    sort: true,
    pagination: { limit: 10 },
    className: { table: 'table table-hover align-middle' },
    server: {
      url: "{{ data_url }}",
      then: data => data.items.map(r => [r.id, r.name, r.guild_id, r.members_count, r.created_at]),
      total: data => data.total
    }
  }).render(document.getElementById('grid'));
</script>
{% endblock %}
