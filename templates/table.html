{% extends "base.html" %}
{% block content %}
<h1 class="mb-4">{{ title }}</h1>
<div id="grid"></div>
{% endblock %}

{% block scripts %}
<script>
  const columns = {{ columns|tojson }};
  const fields = {{ fields|tojson }};
  new gridjs.Grid({
    columns: columns,
    search: true,
    sort: true,
    pagination: { limit: 10 },
    className: { table: 'table table-hover align-middle' },
    server: {
      url: "{{ data_url }}",
      then: data => data.items.map(row => fields.map(f => row[f])),
      total: data => data.total
    }
  }).render(document.getElementById('grid'));
</script>
{% endblock %}
